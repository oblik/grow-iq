OneChain API
OneChain CLI
OneChain provides a command line interface (CLI) tool to interact with the OneChain network, its features, and the Move programming language. The complete suite of tools is called the OneChain CLI, with commands grouped together by feature. Each group of commands is commonly referred to by its top-level command: OneChain Client CLI, OneChain Console CLI, OneChain Keytool CLI, OneChain Move CLI, and OneChain Validator CLI.

Update CLI
To get the latest version of the CLI, you can run the following command from a terminal or console.

cargo install --locked --git https://github.com/one-chain-labs/onechain.git one_chain  --features tracing

mv ~/.cargo/bin/one_chain ~/.cargo/bin/one
INFO
The tracing feature is important as it adds Move test coverage and debugger support in the OneChain CLI. Unless it is enabled you will not be able to use these two features.

OneChain CLI commands
There are a number of top-level commands available, but the five most useful to users are the following. Use the help flag for the commands that are not documented yet. For example, one validator --help.

OneChain Client CLI: Use the one client commands to interact with the OneChain network.
OneChain Client PTB CLI: Use the one client ptb command to build and execute PTBs.
OneChain Console CLI: Use one console to open an interactive console with the currently active network.
OneChain Keytool CLI: Use the one keytool commands to access cryptography utilities.
OneChain Move CLI: Use the one move commands to work with the Move programming language.
OneChain Validator CLI: Use the one validator commands to access tools useful for OneChain validators.
OneChain Client CLI
The OneChain CLI client command provides command-level access to interact with the OneChain network. Typical uses for one client include publishing Move smart contracts, getting the information of an object, executing transactions, or managing addresses.

Check OneChain CLI installation
Before you can use the OneChain CLI, you must install it. To check if the CLI exists on your system, open a terminal or console and type the following command:

$ one --version
If the terminal or console responds with a version number, you already have the OneChain CLI installed.

If the command is not found, follow the instructions in Install OneChain to get the OneChain CLI on your system.

Commands
The following list itemizes all the available subcommands for the one client command.

Usage: one client [OPTIONS] [COMMAND]

Commands:
  active-address              Default address used for commands when none specified
  active-env                  Default environment used for commands when none specified
  addresses                   Obtain the Addresses managed by the client
  balance                     List the coin balance of an address
  call                        Call Move function
  chain-identifier            Query the chain identifier from the rpc endpoint
  dynamic-field               Query a dynamic field by its address
  envs                        List all OneChain environments
  execute-signed-tx           Execute a Signed Transaction. This is useful when the user prefers to sign elsewhere and use this command to execute
  execute-combined-signed-tx  Execute a combined serialized SenderSignedData string
  faucet                      Request gas coin from faucet. By default, it will use the active address and the active network
  gas                         Obtain all gas objects owned by the address. An address' alias can be used instead of the address
  merge-coin                  Merge two coin objects into one coin
  new-address                 Generate new address and keypair with keypair scheme flag {ed25519 | secp256k1 | secp256r1} with optional derivation path, default to m/44'/784'/0'/0'/0' for ed25519 or m/54'/784'/0'/0/0
                                  for secp256k1 or m/74'/784'/0'/0/0 for secp256r1. Word length can be { word12 | word15 | word18 | word21 | word24} default to word12 if not specified
  new-env                     Add new OneChain environment
  object                      Get object info
  objects                     Obtain all objects owned by the address. It also accepts an address by its alias
  pay                         Pay coins to recipients following specified amounts, with input coins. Length of recipients must be the same as that of amounts
  pay-all-oct                 Pay all residual OCT coins to the recipient with input coins, after deducting the gas cost. The input coins also include the coin for gas payment, so no extra gas coin is required
  pay-oct                     Pay OCT coins to recipients following following specified amounts, with input coins. Length of recipients must be the same as that of amounts. The input coins also include the coin for
                                  gas payment, so no extra gas coin is required
  publish                     Publish Move modules
  split-coin                  Split a coin object into multiple coins
  switch                      Switch active address and network(e.g., devnet, local rpc server)
  tx-block                    Get the effects of executing the given transaction block
  transfer                    Transfer object
  transfer-oct                Transfer OCT, and pay gas with the same OCT coin object. If amount is specified, only the amount is transferred; otherwise the entire object is transferred
  upgrade                     Upgrade Move modules
  verify-bytecode-meter       Run the bytecode verifier on the package
  verify-source               Verify local Move packages against on-chain packages, and optionally their dependencies
  profile-transaction         Profile the gas usage of a transaction. Unless an output filepath is not specified, outputs a file `gas_profile_{tx_digest}_{unix_timestamp}.json` which can be opened in a flamegraph
                                  tool such as speedscope
  replay-transaction          Replay a given transaction to view transaction effects. Set environment variable MOVE_VM_STEP=1 to debug
  replay-batch                Replay transactions listed in a file
  replay-checkpoint           Replay all transactions in a range of checkpoints
  help                        Print this message or the help of the given subcommand(s)

Options:
      --client.config <CONFIG>  Sets the file storing the state of our user accounts (an empty one will be created if missing)
      --json                    Return command outputs in json format
  -y, --yes
  -h, --help                    Print help
JSON output
Append the --json flag to commands to format responses in JSON instead of the more human-friendly default OneChain CLI output. This can be useful for extremely large datasets, for example, as those results can have a troublesome display on smaller screens. In these cases, the --json flag is useful.

Examples
The following examples demonstrate some of the most often used commands.

List available network environments
Use the one client envs command to find the network environments set up in the CLI. The information for these environments is also stored in the client.yaml file in the OneChain configuration directory (~/.one/one_config).

╭────────┬───────────────────────────────────┬────────╮
│ alias  │ url                               │ active │
├────────┼───────────────────────────────────┼────────┤
│ devnet │ https://rpc-devnet.onelabs.cc:443 │ *      │
╰────────┴───────────────────────────────────┴────────╯
Create network environment
Use one client new-env to add details for a new network environment. This example creates an environment pointer to OneChain Mainnet. Setting the alias value makes referencing the environment less prone to typographical errors. After running this command, OneChain updates your client.yaml file in ~/.one/one_config with the new information.

$ one client new-env --alias=mainnet --rpc https://rpc-mainnet.onelabs.cc:443

Added new OneChain env [mainnet] to config.
Set current environment
Use the one client switch command to change the current network. This example switches the current network to mainnet.

$ one client switch --env mainnet
Active environment switched to [mainnet]
If you run one client envs after this command, you see the asterisk in the active column on the mainnet row of the table.

Get current active address
Use the one client active-address command to reveal the current address. The CLI uses the current active address to execute address-specific CLI commands (like one client objects) when you don't provide them with a OneChain address value.

$ one client active-address
0x514692f08249c3e9951234ce29074695840422564bff85e424b56de462913e0d
Request a OCT coin from faucet
If you use one of the standard public RPCs (for example, rpc-devnet.onelabs.cc:443), you can use the faucet command to request gas coins. If you use a custom faucet service, then pass in the URL to the faucet using the --url option. The faucet command works for a local network, as well. If you start your network with a custom faucet port, include the --url option.

$ one client faucet
Request successful. It can take up to 1 minute to get the coin. Run one client gas to check your gas coins.
Get objects owned by an address
Use one client objects to list summary information about the objects the current active address owns. You can provide a OneChain address value to the command to list objects for a particular address. This example lists objects for the current active address.

$ one client objects 0x36df11369cf00ecf0be68d6ba965b0abe2e883bc5245911e3a29ebfa0aaf6b69
╭───────────────────────────────────────────────────────────────────────────────────────╮
| ╭────────────┬──────────────────────────────────────────────────────────────────────╮ │
│ │ objectId   │  0xfffbb30ccb631f15f6cd36700589fc9c31cb04af28a95f3ed26d62daf3acb57f  │ │
│ │ version	   │  33363559                                                        	  │ │
│ │ digest 	   │  IY7/qsIJhliQL0uxwSzNYu0SMcn5AMsqQklSGngn1V0=                    	  │ │
│ │ objectType │  0x0000..0002::coin::Coin                                        	  │ │
│ ╰────────────┴──────────────────────────────────────────────────────────────────────╯ │
│ ╭────────────┬──────────────────────────────────────────────────────────────────────╮ │
│ │ objectId   │  0xfffe59fb6f78b1ced7f6537e69a205cc45d105270857bfd66332f9a627a38ae0  │ │
│ │ version	   │  33370864                                                            │ │
│ │ digest     │  b+tKChvujbCk/UCm8L+lflyb6Vjt7beB+uz6+ahUHmM=                    	  │ │
│ │ objectType │  0x0000..0002::coin::Coin                                        	  │ │
│ ╰────────────┴──────────────────────────────────────────────────────────────────────╯ │
╰───────────────────────────────────────────────────────────────────────────────────────╯
Get complete object information
Use one client object <OBJECT-ID> to list object information for the ID you provide. This example displays the information for a Coin object.

$ one client object 0xfffbb30ccb631f15f6cd36700589fc9c31cb04af28a95f3ed26d62daf3acb57f
╭───────────────┬─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ objectId      │  0xfffbb30ccb631f15f6cd36700589fc9c31cb04af28a95f3ed26d62daf3acb57f                                                 │
│ version       │  33363559                                                                                                           │
│ digest        │  3FzvXJVVVcXb9H6dEXdARaY9EmxXyyNFduet3X4eYV4x                                                                       │
│ objType       │  0x2::coin::Coin<0x2::oct::OCT>                                                                                     │
│ ownerType     │  AddressOwner                                                                                                       │
│ prevTx        │  ES2RQThjRE5u8rwiUEnhcnMoLA3cHeEGYJ8Pq98tmyAc                                                                       │
│ storageRebate │  988000                                                                                                             │
│ content       │ ╭───────────────────┬─────────────────────────────────────────────────────────────────────────────────────────────╮ │
│               │ │ dataType          │  moveObject                                                                                 │ │
│               │ │ type              │  0x2::coin::Coin<0x2::oct::OCT>                                                             │ │
│               │ │ hasPublicTransfer │  true                                                                                       │ │
│               │ │ fields            │ ╭─────────┬───────────────────────────────────────────────────────────────────────────────╮ │ │
│               │ │                   │ │ balance │  530076676                                                                    │ │ │
│               │ │                   │ │ id      │ ╭────┬──────────────────────────────────────────────────────────────────────╮ │ │ │
│               │ │                   │ │         │ │ id │  0xfffbb30ccb631f15f6cd36700589fc9c31cb04af28a95f3ed26d62daf3acb57f  │ │ │ │
│               │ │                   │ │         │ ╰────┴──────────────────────────────────────────────────────────────────────╯ │ │ │
│               │ │                   │ ╰─────────┴───────────────────────────────────────────────────────────────────────────────╯ │ │
│               │ ╰───────────────────┴─────────────────────────────────────────────────────────────────────────────────────────────╯ │
╰───────────────┴─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
Get dynamic fields of an object
Use the one client dynamic-field <DYNAMIC-FIELD-ID> command to list the details of the dynamic field with the ID you provide.

$ one client dynamic-field 0x5
╭─────────────┬───────────────────────────────────────────────────────────────────────────────────────────╮
│ hasNextPage │  false                                                                                	  │
│ nextCursor  │  0x5b890eaf2abcfa2ab90b77b8e6f3d5d8609586c3e583baf3dccd5af17edf48d1                   	  │
│ data     	  │ ╭───────────────────────────────────────────────────────────────────────────────────────╮ │
│         	  │ │ ╭────────────┬──────────────────────────────────────────────────────────────────────╮ │ │
│         	  │ │ │ name   	   │ ╭───────┬───────╮                                                	  │ │ │
│         	  │ │ │        	   │ │ type  │  u64  │                                                	  │ │ │
│         	  │ │ │        	   │ │ value │  2    │                                                	    │ │ │
│         	  │ │ │        	   │ ╰───────┴───────╯                                                	  │ │ │
│         	  │ │ │ bcsName	   │  LQM2cdzDY3                                                      	  │ │ │
│         	  │ │ │ type   	   │  DynamicField                                                    	  │ │ │
│         	  │ │ │ objectType │  0x3::sui_system_state_inner::SuiSystemStateInnerV2              	  │ │ │
│         	  │ │ │ objectId   │  0x5b890eaf2abcfa2ab90b77b8e6f3d5d8609586c3e583baf3dccd5af17edf48d1  │ │ │
│         	  │ │ │ version	   │  112                                                             	  │ │ │
│         	  │ │ │ digest 	   │  HMrm1KNKjq3GfB1cWTRdvRo8gk7auhgvoZXaVoyEHqUR                    	  │ │ │
│         	  │ │ ╰────────────┴──────────────────────────────────────────────────────────────────────╯ │ │
│         	  │ ╰───────────────────────────────────────────────────────────────────────────────────────╯ │
╰─────────────┴───────────────────────────────────────────────────────────────────────────────────────────╯
Send OCT or objects
In this example, let's see how to transfer OCT or transfer an object from one address to another. First of all, there two main commands for sending OCT or transferring objects: pay and transfer. Both pay and transfer have a few sister commands: pay-oct, pay-all-oct, transfer-oct.

The differences between these commands are:

commands that end in -oct deal with OneChain's native coin, and they use the input coints to pay for gas and for transferring OCT or the object.
pay- commands typically deal with coins and handle gas smashing for you, whereas transfer commands can handle the transfer of any object that has public transfer, meaning any object that has the store ability.
pay commands allow you to send coins to multiple recipients, whereas transfer commands only accept one recipient.
pay-all-oct is a special case of pay-oct that offers a way to transfer the entire balance after smashing.
transfer-oct is a legacy command and has been entirely superseded by pay-oct or pay-all-oct depending on whether an amount is specified or not.
Assume you have two addresses:

╭───────────────────┬────────────────────────────────────────────────────────────────────┬────────────────╮
│ alias             │ address                                                            │ active address │
├───────────────────┼────────────────────────────────────────────────────────────────────┼────────────────┤
│ hungry-spodumene  │ 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea │ *              │
│ eloquent-amber    │ 0x3d78abc33ccd173c521b4f9e78b21ea2c989960b631732c539efaa38bda30976 │                │
╰───────────────────┴────────────────────────────────────────────────────────────────────┴────────────────╯
Address hungry-spodumene has a few coins:

$ one client gas hungry-spodumene
╭────────────────────────────────────────────────────────────────────┬────────────────────┬───────────────╮
│ gasCoinId                                                          │ mistBalance (MIST) │ balance (OCT) │
├────────────────────────────────────────────────────────────────────┼────────────────────┼───────────────┤
│ 0x205972830acd8264a38b9a1776a1b72a1ae626fa23a4d1f12249349ce3b83c06 │ 200000000000       │ 200.00        │
│ 0x56d76420a5bc7d356e3930e6a2ddc61cbbc0c87ea5c5f3cc3ac5952b4d52be5a │ 200000000000       │ 200.00        │
│ 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52 │ 200000000000       │ 200.00        │
│ 0xe373de9bdbd3dbd4f5f707f144c83af74a181cdb3903a953ee366f48e33865c7 │ 200000000000       │ 200.00        │
│ 0xf7adb6aeb18eb409c03fe88cc31711b61a65333e0fdd88c1815d4ec75f713f31 │ 200000000000       │ 200.00        │
╰────────────────────────────────────────────────────────────────────┴────────────────────┴───────────────╯
You want to send 0.5 OCT to eloquent-amber. Given that you have a few gas coins, you can use pay. If only one gas coin exists, then you need to use transfer-oct or pay-oct, or you would need to split the coin first to have another coin to use for paying gas. In this case, let's use the pay-oct command as you do not need to provide a separate gas coin to be used for the gas fees. In the command below, you set the recipient to be eloquent-amber, which coin to use to transfer OCT from, and the amount of OCT to transfer.

TIP
Beginning with the OneChain release, the --gas-budget option is no longer required for CLI commands.

$ one client pay-oct --recipients eloquent-amber --input-coins 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52 --amounts 500000000 --gas-budget 5000000
The result is:

Transaction Digest: AsWkciVhLHeCmqVipjjyAA7Hv5y87pFjHS59K8m4zBJV
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Data                                                                                             │
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Sender: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                                   │
│ Gas Owner: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                                │
│ Gas Budget: 5000000 MIST                                                                                     │
│ Gas Price: 1000 MIST                                                                                         │
│ Gas Payment:                                                                                                 │
│  ┌──                                                                                                         │
│  │ ID: 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52                                    │
│  │ Version: 2                                                                                                │
│  │ Digest: 9MEH7kr1YkBDx7pdUPCDnVb3FtPz9UZVeWmCot5Dhxqr                                                      │
│  └──                                                                                                         │
│                                                                                                              │
│ Transaction Kind: Programmable                                                                               │
│ ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────╮ │
│ │ Input Objects                                                                                            │ │
│ ├──────────────────────────────────────────────────────────────────────────────────────────────────────────┤ │
│ │ 0   Pure Arg: Type: address, Value: "0x3d78abc33ccd173c521b4f9e78b21ea2c989960b631732c539efaa38bda30976" │ │
│ │ 1   Pure Arg: Type: u64, Value: "500000000"                                                              │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭──────────────────────╮                                                                                     │
│ │ Commands             │                                                                                     │
│ ├──────────────────────┤                                                                                     │
│ │ 0  SplitCoins:       │                                                                                     │
│ │  ┌                   │                                                                                     │
│ │  │ Coin: GasCoin     │                                                                                     │
│ │  │ Amounts:          │                                                                                     │
│ │  │   Input  1        │                                                                                     │
│ │  └                   │                                                                                     │
│ │                      │                                                                                     │
│ │ 1  TransferObjects:  │                                                                                     │
│ │  ┌                   │                                                                                     │
│ │  │ Arguments:        │                                                                                     │
│ │  │   Result 0        │                                                                                     │
│ │  │ Address: Input  0 │                                                                                     │
│ │  └                   │                                                                                     │
│ ╰──────────────────────╯                                                                                     │
│                                                                                                              │
│ Signatures:                                                                                                  │
│    eZc/iFO3i4Y8Le92zu9q75jILs+yg0sSXd1yPV9Dta+knH99VfkSCnzNQG1KbXSvY24wexmVtiuU6NkfudbiAQ==                  │
│                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Effects                                                                               │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Digest: AsWkciVhLHeCmqVipjjyAA7Hv5y87pFjHS59K8m4zBJV                                              │
│ Status: Success                                                                                   │
│ Executed Epoch: 0                                                                                 │
│                                                                                                   │
│ Created Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0xa031d3f8fd53b5f9885172e1c6bd8b770b25e42371c9ee215c6d4b21b2b73241                         │
│  │ Owner: Account Address ( 0x3d78abc33ccd173c521b4f9e78b21ea2c989960b631732c539efaa38bda30976 )  │
│  │ Version: 3                                                                                     │
│  │ Digest: Fq3maqq3pShgKw58Ssm8cS2j1pspfhanedVK2MMxfQWQ                                           │
│  └──                                                                                              │
│ Mutated Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52                         │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ Version: 3                                                                                     │
│  │ Digest: GFB9mpxTP4z6CCShTbvD58FYxtu9G4mnxN3JtFeRupM3                                           │
│  └──                                                                                              │
│ Gas Object:                                                                                       │
│  ┌──                                                                                              │
│  │ ID: 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52                         │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ Version: 3                                                                                     │
│  │ Digest: GFB9mpxTP4z6CCShTbvD58FYxtu9G4mnxN3JtFeRupM3                                           │
│  └──                                                                                              │
│ Gas Cost Summary:                                                                                 │
│    Storage Cost: 1976000 MIST                                                                     │
│    Computation Cost: 1000000 MIST                                                                 │
│    Storage Rebate: 978120 MIST                                                                    │
│    Non-refundable Storage Fee: 9880 MIST                                                          │
│                                                                                                   │
│ Transaction Dependencies:                                                                         │
│    GThyjtRFysBgVppXDc9iduNPzB2bLteXBnJcBEYXz4vG                                                   │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────╮
│ No transaction block events │
╰─────────────────────────────╯

╭──────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Object Changes                                                                                   │
├──────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                 │
│  ┌──                                                                                             │
│  │ ObjectID: 0xa031d3f8fd53b5f9885172e1c6bd8b770b25e42371c9ee215c6d4b21b2b73241                  │
│  │ Sender: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                    │
│  │ Owner: Account Address ( 0x3d78abc33ccd173c521b4f9e78b21ea2c989960b631732c539efaa38bda30976 ) │
│  │ ObjectType: 0x2::coin::Coin<0x2::oct::OCT>                                                    │
│  │ Version: 3                                                                                    │
│  │ Digest: Fq3maqq3pShgKw58Ssm8cS2j1pspfhanedVK2MMxfQWQ                                          │
│  └──                                                                                             │
│ Mutated Objects:                                                                                 │
│  ┌──                                                                                             │
│  │ ObjectID: 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52                  │
│  │ Sender: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                    │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea ) │
│  │ ObjectType: 0x2::coin::Coin<0x2::oct::OCT>                                                    │
│  │ Version: 3                                                                                    │
│  │ Digest: GFB9mpxTP4z6CCShTbvD58FYxtu9G4mnxN3JtFeRupM3                                          │
│  └──                                                                                             │
╰──────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Balance Changes                                                                                   │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│  ┌──                                                                                              │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ CoinType: 0x2::oct::OCT                                                                        │
│  │ Amount: -501997880                                                                             │
│  └──                                                                                              │
│  ┌──                                                                                              │
│  │ Owner: Account Address ( 0x3d78abc33ccd173c521b4f9e78b21ea2c989960b631732c539efaa38bda30976 )  │
│  │ CoinType: 0x2::oct::OCT                                                                        │
│  │ Amount: 500000000                                                                              │
│  └──                                                                                              │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯

Check the gas for the sender and the recipient's coins using one client gas <address>. The sender now has 199.49 OCT for that gas coin that was used. 0.5 OCT was transferred, and the remaining 0.01 OCT paid the gas fees.

$ one client gas
╭────────────────────────────────────────────────────────────────────┬────────────────────┬───────────────╮
│ gasCoinId                                                          │ mistBalance (MIST) │ balance (OCT) │
├────────────────────────────────────────────────────────────────────┼────────────────────┼───────────────┤
│ 0x205972830acd8264a38b9a1776a1b72a1ae626fa23a4d1f12249349ce3b83c06 │ 200000000000       │ 200.00        │
│ 0x56d76420a5bc7d356e3930e6a2ddc61cbbc0c87ea5c5f3cc3ac5952b4d52be5a │ 200000000000       │ 200.00        │
│ 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52 │ 199498002120       │ 199.49        │
│ 0xe373de9bdbd3dbd4f5f707f144c83af74a181cdb3903a953ee366f48e33865c7 │ 200000000000       │ 200.00        │
│ 0xf7adb6aeb18eb409c03fe88cc31711b61a65333e0fdd88c1815d4ec75f713f31 │ 200000000000       │ 200.00        │
╰────────────────────────────────────────────────────────────────────┴────────────────────┴───────────────╯
$ one client gas eloquent-amber
╭────────────────────────────────────────────────────────────────────┬────────────────────┬───────────────╮
│ gasCoinId                                                          │ mistBalance (MIST) │ balance (OCT) │
├────────────────────────────────────────────────────────────────────┼────────────────────┼───────────────┤
│ 0xa031d3f8fd53b5f9885172e1c6bd8b770b25e42371c9ee215c6d4b21b2b73241 │ 500000000          │ 0.50          │
╰────────────────────────────────────────────────────────────────────┴────────────────────┴───────────────╯
If you want to transfer the whole object, you can use one client pay-all-oct or one client transfer-oct (without passing the amount):

$ one client pay-oct --recipient eloquent-amber --input-coins 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52 --gas-budget 5000000
or

$ one client transfer-oct --to eloquent-amber --coin-object-id 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52 --gas-budget 5000000
Then check the gas for eloquent-amber again:

$ one client gas eloquent-amber
╭────────────────────────────────────────────────────────────────────┬────────────────────┬───────────────╮
│ gasCoinId                                                          │ mistBalance (MIST) │ balance (OCT) │
├────────────────────────────────────────────────────────────────────┼────────────────────┼───────────────┤
│ 0xa031d3f8fd53b5f9885172e1c6bd8b770b25e42371c9ee215c6d4b21b2b73241 │ 500000000          │ 0.50          │
│ 0xc9b447fff18f13fa035e028534b8344d5fc8a8760248fad10155e78f44dc3a52 │ 199496992240       │ 199.49        │
╰────────────────────────────────────────────────────────────────────┴────────────────────┴───────────────╯
Replay a transaction
Use the one client replay-transaction --tx-digest <TRANSACTION-DIGEST> to re-execute a transaction locally and show the transaction effects. This command will fetch the transaction dependencies from the Full node specified in the client env. For transactions that happened quite far in the past, it is advised to set the client Full node to one that has non-pruned chain data for that transaction. This will also verify that the resulting effects from the locally executed transaction match the effects of the transaction stored on-chain.

You can add additional flags --gas-info and --ptb-info to this command to see more information about the transaction.

$ one client replay-transaction --tx-digest 51MzJP2Uesvza8vXGpPCGbfLrY6UCfdvdoErN1z4oXPW
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Effects                                                                               │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Digest: 51MzJP2Uesvza8vXGpPCGbfLrY6UCfdvdoErN1z4oXPW                                              │
│ Status: Success                                                                                   │
│ Executed Epoch: 237                                                                               │
│                                                                                                   │
│ Mutated Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x0000000000000000000000000000000000000000000000000000000000000006                         │
│  │ Owner: Shared                                                                                  │
│  │ Version: 20303014                                                                              │
│  │ Digest: 3FyU88FpFFa2mhDFJWcabwQNdfaVaWvvnbjkfErD6AgJ                                           │
│  └──                                                                                              │
│                                                                                                   │
│ Shared Objects:                                                                                   │
│  ┌──                                                                                              │
│  │ ID: 0x0000000000000000000000000000000000000000000000000000000000000006                         │
│  │ Version: 20303013                                                                              │
│  │ Digest: 7uGV3aHa9NDAWLX1UUyV1DG7wAuhfFkzSGo514wtco1C                                           │
│  └──                                                                                              │
│                                                                                                   │
│ Gas Object:                                                                                       │
│  ┌──                                                                                              │
│  │ ID: 0x0000000000000000000000000000000000000000000000000000000000000000                         │
│  │ Owner: Account Address ( 0x0000000000000000000000000000000000000000000000000000000000000000 )  │
│  │ Version: 0                                                                                     │
│  │ Digest: 11111111111111111111111111111111                                                       │
│  └──                                                                                              │
│                                                                                                   │
│ Gas Cost Summary:                                                                                 │
│    Storage Cost: 0                                                                                │
│    Computation Cost: 0                                                                            │
│    Storage Rebate: 0                                                                              │
│    Non-refundable Storage Fee: 0                                                                  │
│                                                                                                   │
│ Transaction Dependencies:                                                                         │
│    EvDLzYeKbrxDNHJomgrr2zwAJ7FJDtb2uNwfbonF2uGK                                                   │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
Execution finished successfully. Local and on-chain effects match.
Use one client replay-batch --path <FILEPATH> to replay several transactions listed in a newline-separated file. This will verify that all transactions local execution results match the effects on-chain.

Profile a transaction
Use the one client profile-transaction --tx-digest <TRANSACTION-DIGEST> command to re-execute a transaction locally and produce a gas profile. Similar to the replay command, this command fetches the transaction dependencies from the Full node specified in the client environment that are needed to execute the transaction. During the local execution of the transaction, this command records all the Move function invocations and the gas cost breakdown for each invocation.

To enable the profiler, you must either install or build the OneChain Client binary locally with the --features tracing flag if it has not already been built with that feature enabled.

$ cargo install --locked --git https://github.com/one-chain-labs/onechain.git --branch <BRANCH-NAME> --features tracing one_chain
The command outputs a profile to the current working directory in the format gas_profile_{tx_digest}_{unix_timestamp}.json. You can include the optional flag --profile-output </PATH/OUTPUT.json> to write the profile to /PATH/OUTPUT_{tx_digest}_{unix_timestamp}.json instead. Use speedscope to inspect the profile.

To install speedscope run

$ npm install -g speedscope
To open a profile in speedscope run

$ speedscope <PATH/PROFILE-OUTPUT-FILE>
When looking at the profile in speedscope, there are three different views available from the top left menu: Timer Order, Left Heavy, and Sandwich. In each view, each bar's vertical width corresponds to the percentage of gas consumption incurred by the function, and you can hover your mouse over a bar or click a bar to see the computation units accrued by the function invocation. The transaction's total computation units, along with the storage computation units, are multiplied by the gas price to determine the gas cost of the transaction based on a tier system.

Time Order shows the callstack of function invocations from left to right in the order of invocation, while Left Heavy combines repeated sequences of nested invocations into a single combined call stack. Left Heavy displays these sequences from left to right by total incurred gas consumption per combined call stack. This is useful when there have been hundreds of repeated calls to the same function to quickly observe the total gas consumption over all calls to that function. In both these views, you can click the top section and drag to zoom in and out over different sections of the profile.

Sandwich view shows a list of discrete values that correspond to gas consumption per function, with Total showing gas cost incurred in all the functions called by the function, and Self showing the gas cost done by only the given function.

Observing a transaction's gas consumption provides useful insight of expected gas cost usage of a smart contract. When developing a smart contract, you can run a local network and publish the package to the local network. Then create a transaction that calls your published smart contract, and finally run the profiler on the transaction to see a breakdown of the gas cost.

Publish a Move package
One of the main uses of the one client command is to publish smart contracts on the OneChain network. This example switches the current environment to the Devnet network, then builds, tests, and publishes one of the existing Move examples available in the OneChain repository: sui/examples/move

This example also makes use of one move commands. To learn more about those commands, see OneChain Move CLI.

Open a terminal or console to the root of your local OneChain repository and navigate to the move_tutorial example.
$ cd examples/move/first_package
Switch to the Devnet network. This command uses an alias, so the devnet value might be different for you, depending on the alias name set in your configuration (use one client envs for a list of your defined networks and their aliases).
$ one client switch --env devnet
Use one move build to build the package. You must run this command at the same level as the package manifest file (Move.toml).
$ one move build
The console responds with the status of the build.
INCLUDING DEPENDENCY One
INCLUDING DEPENDENCY MoveStdlib
BUILDING first_package
Use one move test to run the unit tests.
$ one move test
The console responds with updates of its progress.
INCLUDING DEPENDENCY One
INCLUDING DEPENDENCY MoveStdlib
BUILDING first_package
Running Move unit tests
[ PASS    ] 0x0::example::test_module_init
[ PASS    ] 0x0::example::test_sword_transactions
Test result: OK. Total tests: 2; passed: 2; failed: 0
Use the one client verify-bytecode-meter to check if the module passes the bytecode meter.
$ one client verify-bytecode-meter
The console responds with the maximum allowed values, as well as the amount the package uses.
Running bytecode verifier for 1 modules
╭──────────────────────────────────╮
│ Module will pass metering check! │
├────────┬────────────┬────────────┤
│        │ Module     │ Function   │
│ Max    │ 16000000   │ 16000000   │
│ Used   │ 4565       │ 4565       │
╰────────┴────────────┴────────────╯
Use one client gas to verify that the active address has a gas coin for paying gas.
$ one client gas
In the case of this example, the console responds with the information that the address is coinless.
No gas coins are owned by this address
If you need coins, use one client faucet (not available for Mainnet). For more information on getting gas tokens, see Get OneChain Tokens.
$ one client faucet
Use one client gas to verify the current active address received the coins.
$ one client gas
╭────────────────────────────────────────────────────────────────────┬─────────────╮
│ gasCoinId                                                          │ gasBalance  │
├────────────────────────────────────────────────────────────────────┼─────────────┤
│ 0x01b2795ba5800c8f7cb7d7c56abe19e24c656ed6764f3ccc5e66da3de52402a8 │ 10000000000 │
╰────────────────────────────────────────────────────────────────────┴─────────────╯
Use one client publish to publish the package, being sure to set an appropriate value for the gas-budget flag if you're using an older version of OneChain. The console responds with the details of the publish. You can use one client object <OBJECT-ID> to check the details of any of the objects from the process.
$ one client publish --gas-budget 100000000 .
 Transaction Digest: ABPd7v8BxLkcyHvX8Jt1SbneQRwzE9WzcEoptT2RDNVF
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Data                                                                                             │
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Sender: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                                   │
│ Gas Owner: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                                │
│ Gas Budget: 5000000000 MIST                                                                                  │
│ Gas Price: 1000 MIST                                                                                         │
│ Gas Payment:                                                                                                 │
│  ┌──                                                                                                         │
│  │ ID: 0x01b2795ba5800c8f7cb7d7c56abe19e24c656ed6764f3ccc5e66da3de52402a8                                    │
│  │ Version: 2                                                                                                │
│  │ Digest: GZQwvpxLeTciVboEWeC8EZ2KYYU9o6XoBtW6LrA5Si1h                                                      │
│  └──                                                                                                         │
│                                                                                                              │
│ Transaction Kind: Programmable                                                                               │
│ ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────╮ │
│ │ Input Objects                                                                                            │ │
│ ├──────────────────────────────────────────────────────────────────────────────────────────────────────────┤ │
│ │ 0   Pure Arg: Type: address, Value: "0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea" │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭─────────────────────────────────────────────────────────────────────────╮                                  │
│ │ Commands                                                                │                                  │
│ ├─────────────────────────────────────────────────────────────────────────┤                                  │
│ │ 0  Publish:                                                             │                                  │
│ │  ┌                                                                      │                                  │
│ │  │ Dependencies:                                                        │                                  │
│ │  │   0x0000000000000000000000000000000000000000000000000000000000000001 │                                  │
│ │  │   0x0000000000000000000000000000000000000000000000000000000000000002 │                                  │
│ │  └                                                                      │                                  │
│ │                                                                         │                                  │
│ │ 1  TransferObjects:                                                     │                                  │
│ │  ┌                                                                      │                                  │
│ │  │ Arguments:                                                           │                                  │
│ │  │   Result 0                                                           │                                  │
│ │  │ Address: Input  0                                                    │                                  │
│ │  └                                                                      │                                  │
│ ╰─────────────────────────────────────────────────────────────────────────╯                                  │
│                                                                                                              │
│ Signatures:                                                                                                  │
│    x437h/JxDAba2zkx4a2kEfz6iaXQ08T7+inyP5YkbmlSB5K7IYasM6onckjYDB19FNM1ZNqXm1z13VyTmDHXCw==                  │
│                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Effects                                                                               │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Digest: ABPd7v8BxLkcyHvX8Jt1SbneQRwzE9WzcEoptT2RDNVF                                              │
│ Status: Success                                                                                   │
│ Executed Epoch: 0                                                                                 │
│                                                                                                   │
│ Created Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x569828cc4e134ccccd7408def18b80af1465ac791fd4ef40483f6b16e2f00d95                         │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ Version: 3                                                                                     │
│  │ Digest: 4iD7ZhsFS9iFuszqxBSEL6xZdcnWG76WGgU4D5PH1PeL                                           │
│  └──                                                                                              │
│  ┌──                                                                                              │
│  │ ID: 0xde670ae990c8f20fd53e9f597a0da056bdb634175176602658e9da2c2ec9cb93                         │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ Version: 3                                                                                     │
│  │ Digest: AV27tn7ePXhdDyDV9TCkSQZA3mkMei9DV63AmB4DEjGN                                           │
│  └──                                                                                              │
│  ┌──                                                                                              │
│  │ ID: 0xe1d9d66b7a19b27ebda338a52593cd10e728f666f34ecd30a7cc2ad3fed186da                         │
│  │ Owner: Immutable                                                                               │
│  │ Version: 1                                                                                     │
│  │ Digest: 4bzxMQgcSZoKzppNiRtQwAWDBvCgjr18gQi2H8Yk1tQZ                                           │
│  └──                                                                                              │
│ Mutated Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x01b2795ba5800c8f7cb7d7c56abe19e24c656ed6764f3ccc5e66da3de52402a8                         │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ Version: 3                                                                                     │
│  │ Digest: 46rvdbXkw5qqsBYbUGChzgFatJAYPmarPmFHgRRJiiU9                                           │
│  └──                                                                                              │
│ Gas Object:                                                                                       │
│  ┌──                                                                                              │
│  │ ID: 0x01b2795ba5800c8f7cb7d7c56abe19e24c656ed6764f3ccc5e66da3de52402a8                         │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ Version: 3                                                                                     │
│  │ Digest: 46rvdbXkw5qqsBYbUGChzgFatJAYPmarPmFHgRRJiiU9                                           │
│  └──                                                                                              │
│ Gas Cost Summary:                                                                                 │
│    Storage Cost: 9978800                                                                          │
│    Computation Cost: 1000000                                                                      │
│    Storage Rebate: 978120                                                                         │
│    Non-refundable Storage Fee: 9880                                                               │
│                                                                                                   │
│ Transaction Dependencies:                                                                         │
│    891Qjq6qDZ6SzAJiAg3CEaHobXrpDL5bAy2o45ZJPTuB                                                   │
│    ESHcS3y3VCuaCVmWkKDx3EXX3icfPtj4bHhk86gaGWdo                                                   │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────╮
│ No transaction block events │
╰─────────────────────────────╯
╭────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Object Changes                                                                                     │
├────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                   │
│  ┌──                                                                                               │
│  │ ObjectID: 0x569828cc4e134ccccd7408def18b80af1465ac791fd4ef40483f6b16e2f00d95                    │
│  │ Sender: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                      │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )   │
│  │ ObjectType: 0xe1d9d66b7a19b27ebda338a52593cd10e728f666f34ecd30a7cc2ad3fed186da::example::Forge  │
│  │ Version: 3                                                                                      │
│  │ Digest: 4iD7ZhsFS9iFuszqxBSEL6xZdcnWG76WGgU4D5PH1PeL                                            │
│  └──                                                                                               │
│  ┌──                                                                                               │
│  │ ObjectID: 0xde670ae990c8f20fd53e9f597a0da056bdb634175176602658e9da2c2ec9cb93                    │
│  │ Sender: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                      │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )   │
│  │ ObjectType: 0x2::package::UpgradeCap                                                            │
│  │ Version: 3                                                                                      │
│  │ Digest: AV27tn7ePXhdDyDV9TCkSQZA3mkMei9DV63AmB4DEjGN                                            │
│  └──                                                                                               │
│ Mutated Objects:                                                                                   │
│  ┌──                                                                                               │
│  │ ObjectID: 0x01b2795ba5800c8f7cb7d7c56abe19e24c656ed6764f3ccc5e66da3de52402a8                    │
│  │ Sender: 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea                      │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )   │
│  │ ObjectType: 0x2::coin::Coin<0x2::oct::OCT>                                                      │
│  │ Version: 3                                                                                      │
│  │ Digest: 46rvdbXkw5qqsBYbUGChzgFatJAYPmarPmFHgRRJiiU9                                            │
│  └──                                                                                               │
│ Published Objects:                                                                                 │
│  ┌──                                                                                               │
│  │ PackageID: 0xe1d9d66b7a19b27ebda338a52593cd10e728f666f34ecd30a7cc2ad3fed186da                   │
│  │ Version: 1                                                                                      │
│  │ Digest: 4bzxMQgcSZoKzppNiRtQwAWDBvCgjr18gQi2H8Yk1tQZ                                            │
│  │ Modules: example                                                                                │
│  └──                                                                                               │
╰────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Balance Changes                                                                                   │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│  ┌──                                                                                              │
│  │ Owner: Account Address ( 0x0fe375fff0ee40d20c54a7f2478b9b5c7eaa3625b7611f9661ec5faefb4a6fea )  │
│  │ CoinType: 0x2::oct::OCT                                                                        │
│  │ Amount: -10000680                                                                              │
│  └──                                                                                              │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
Help
Each command has its own help section. For example, one client call --help displays the following prompt:

Call Move function

Usage: one client call [OPTIONS] --package <PACKAGE> --module <MODULE> --function <FUNCTION>

Options:
      --package <PACKAGE>               Object ID of the package, which contains the module
      --module <MODULE>                 The name of the module in the package
      --function <FUNCTION>             Function name in module
      --type-args <TYPE_ARGS>...        Type arguments to the generic function being called. All must be specified, or the call will fail
      --args <ARGS>...                  Simplified ordered args like in the function syntax ObjectIDs, Addresses must be hex strings
      --gas <GAS>                       ID of the gas object for gas payment. If not provided, a gas object with at least gas_budget value will be selected
      --gas-budget <GAS_BUDGET>         An optional gas budget for this transaction (in MIST). If gas budget is not provided, the tool will first perform a dry
                                        run to estimate the gas cost, and then it will execute the transaction. Please note that this incurs a small cost in
                                        performance due to the additional dry run call
      --dry-run                         Perform a dry run of the transaction, without executing it
      --dev-inspect                     Perform a dev inspect
      --serialize-unsigned-transaction  Instead of executing the transaction, serialize the bcs bytes of the unsigned transaction data (TransactionData) using
                                        base64 encoding, and print out the string <TX_BYTES>. The string can be used to execute transaction with `one client
                                        execute-signed-tx --tx-bytes <TX_BYTES>`
      --serialize-signed-transaction    Instead of executing the transaction, serialize the bcs bytes of the signed transaction data (SenderSignedData) using
                                        base64 encoding, and print out the string <SIGNED_TX_BYTES>. The string can be used to execute transaction with `one
                                        client execute-combined-signed-tx --signed-tx-bytes <SIGNED_TX_BYTES>`
      --json                            Return command outputs in json format
  -h, --help                            Print help
  -V, --version                         Print version
OneChain Client PTB CLI
The client ptb command allows you to specify the transactions for execution in a programmable transaction block (PTB) directly from your CLI or through bash scripts.

WARNING
The examples in this document were tested using a bash shell environment. Your experience might vary depending on how your shell interprets the input values (for example, zsh requires quotes around passed values in brackets: "[]"; whereas bash accepts them without quotes). On Windows, you might need to add even more quotes around arguments passed (for example, --assign "forge @<FORGE-ID>").

Commands
The following list itemizes all the available args for the one client ptb command. Use the --help for a long help version that includes some examples on how to use this command.

Build, preview, and execute programmable transaction blocks. Depending on your shell, you might have to use quotes around arrays or other passed values. Use --help to see examples for how to use the core functionality of this
command.

Usage: one client ptb [OPTIONS]

Options:
      --assign <NAME> <VALUE>
          Assign a value to a variable name to use later in the PTB.
           If only a name is supplied, the result of the last transaction is bound to that name.
           If a name and value are supplied, then the name is bound to that value.

          Examples:
           --assign MYVAR 100
           --assign X [100,5000]
           --split-coins gas [1000, 5000, 75000]
           --assign new_coins # bound new_coins to the result of previous transaction

      --dry-run
          Perform a dry run of the PTB instead of executing it.

      --gas-coin <ID>
          The object ID of the gas coin to use. If not specified, it will try to use the first gas coin that it finds that has at least the requested gas-budget balance.

      --gas-budget <MIST>
          An optional gas budget for this PTB (in MIST). If gas budget is not provided, the tool will first perform a dry run to estimate the gas cost, and then it will execute the transaction. Please note that this incurs a small
          cost in performance due to the additional dry run call.

      --make-move-vec <TYPE> <[VALUES]>
          Given n-values of the same type, it constructs a vector. For non objects or an empty vector, the type tag must be specified.

          Examples:
           --make-move-vec <u64> []
           --make-move-vec <u64> [1, 2, 3, 4]
           --make-move-vec <std::option::Option<u64>> [none,none]
           --make-move-vec <sui::coin::Coin<sui::oct::OCT>> [gas]

      --merge-coins <INTO_COIN> <[COIN OBJECTS]>
          Merge N coins into the provided coin.

          Examples:
           --merge-coins @coin_object_id [@coin_obj_id1, @coin_obj_id2]

      --move-call <PACKAGE::MODULE::FUNCTION> <TYPE_ARGS> <FUNCTION_ARGS>
          Make a move call to a function.

          Examples:
           --move-call std::option::is_none <u64> none
           --assign a none
           --move-call std::option::is_none <u64> a

      --split-coins <COIN> <[AMOUNT]>
          Split the coin into N coins as per the given array of amounts.

          Examples:
           --split-coins gas [1000, 5000, 75000]
           --assign new_coins # bounds the result of split-coins command to variable new_coins
           --split-coins @coin_object_id [100]

      --transfer-objects <[OBJECTS]> <TO>
          Transfer objects to the specified address.

          Examples:
           --transfer-objects [obj1, obj2, obj3] @address

           --split-coins gas [1000, 5000, 75000]
           --assign new_coins # bound new_coins to result of split-coins to use next
           --transfer-objects [new_coins.0, new_coins.1, new_coins.2] @to_address

      --publish <MOVE_PACKAGE_PATH>
          Publish the Move package. It takes as input the folder where the package exists.

          Examples:
           --move-call sui::tx_context::sender
           --assign sender
           --publish "."
           --assign upgrade_cap
           --transfer-objects "[upgrade_cap]" sender

      --upgrade <MOVE_PACKAGE_PATH>
          Upgrade the move package. It takes as input the folder where the package exists.

      --preview
          Preview the list of PTB transactions instead of executing them.

      --serialize-unsigned-transaction
          Instead of executing the transaction, serialize the bcs bytes of the unsigned transaction data using base64 encoding.

      --serialize-signed-transaction
          Instead of executing the transaction, serialize the bcs bytes of the signed transaction data using base64 encoding.

      --summary
          Show only a short summary (digest, execution status, gas cost). Do not use this flag when you need all the transaction data and the execution effects.

      --warn-shadows
          Enable shadow warning when the same variable name is declared multiple times. Off by default.

      --json
          Return command outputs in json format.

  -h, --help
          Print help (see a summary with '-h')
Design philosophy and concepts
The main philosophy behind the CLI PTB support is to enable a user to build and execute a PTB from the command line. Bash scripts can be used to construct and execute the PTB just as you would do from the command line, providing great flexibility when it comes to automating different tasks.

Besides using existing traditional PTB related concepts, we introduce a few new and important concepts for this command.

WARNING
All the following examples were tested using a bash shell environment and your experience may vary depending on how your shell interprets the input values (e.g., zsh requires to pass values in brackets by adding quotes around it: "[]"; bash accepts them without quotes).

Types
Sometimes, CLI PTBs require that you specify the type of a value or variable. For instance, in the following example you must provide the <u64> type when calling the 0x1::option::is_none function.

$ one client ptb \
--assign my_variable none \
--move-call 0x1::option::is_none "<u64>" my_variable \
--gas-budget 50000000
To pass in multiple types, delimit them with a comma:

...
--move-call package::module::function "<u64,u8,u256>" \
...
Strings
CLI PTBs support string literals as inputs, which will be encoded as pure values that can be used as inputs to vector<u8>, std::ascii::String and std::string::String parameters. The following example previews a transaction block that passes the string "Hello, world" to a function m::f in a package $PKG (its ID is held in an environment variable).

$ one client ptb --move-call "$PKG::m::f" '"Hello, world"' --gas-budget 10000000 --preview
WARNING
Double-quoted string literals tend to also be valid syntax for shells (like bash), so when inputting PTBs on the command-line, remember to wrap the entire string in single-quotes so that its double-quotes are interpreted literally, as in the previous example.

Addresses and Object IDs
You can pass literal addresses and objects IDs by prefixing them with '@'. This is needed to distinguish a hexadecimal value from an address in some situations.

For addresses that are in your local wallet, you can use their alias instead (passing them without '@', for example, --transfer-objects my_alias).

Here are some examples for transfer-objects and gas-coin:

$ one client ptb --transfer-objects "[ARRAY_OF_OBJECTS]" @0x02a212de6a9dfa3a69e22387acfbafbb1a9e591bd9d636e7895dcfc8de05f331 --gas-coin @0x00002819ee07a66e53800495ccf5eeade8a02054a2e0827546c70e4b226f0495
Assign
Use the --assign argument to bind values to variables. There are two ways you can use it:

assign a value to a variable
assign a variable to the result of the previous command
Let's look at the first case where you assign a value to a variable. You want to check if some variable's value is none. Call the 0x1::option::is_none function from the Move standard library, and pass in the variable name:

$ one client ptb \
--assign my_variable none \
--move-call 0x1::option::is_none "<u64>" my_variable \
--gas-budget 50000000
TIP
CLI PTB uses name resolution for common packages like sui, std, deepbook, so you can use them directly instead of their addresses: 0x2, 0x1, or 0xdee9.

In the second case, if a previous command outputs some result, you can bound it to a variable for later access. Let's see an example where you want a new coin with 1000 MIST, which you can achieve by using the split-coins command. After you do that, you want to transfer the new coin to another address. Without the --assign argument, you couldn't instruct the CLI to transfer that new coin object as you would not have a way to refer to it.

$ one client ptb \
--split-coins gas "[1000]" \
--assign coin \
--transfer-objects "[coin]" @recipient_address \
--gas-budget 50000000
TIP
If you build a complex PTB, use the --preview flag to display the PTB transaction list instead of executing it.

Examples
The following examples demonstrate how to use the client ptb command.

TIP
When a PTB is executed, the output contains all the relevant information (transaction data, gas cost, effects, object changes, and so on). Use --summary to get a short summary when you do not need all the data. For complex PTBs, you can use --preview to display the PTB transaction list instead of executing it.

Move call
When needing to execute a Move call, use the --move-call transaction to call a specific function from a package. The CLI PTB supports name resolution for common packages like sui, std, deepbook, so you can use both 0x1::option::is_none as well as std::option::is_none for passing the function name.

--assign A none
--move-call std::option::is_none "<u64>" A
To call a specific function from a specific package, you can use the following call:

--move-call PACKAGE_ADDR::MODULE::FUNCTION "<TYPE>" FUNC_ARG1 FUNC_ARG2 ...
Publish
Publishing a package is one of the most important commands you need when working with OneChain. While the CLI has a standalone publish command, PTBs also support publishing and upgrading packages. One main difference is that with one client ptb, you must explicitly transfer the UpgradeCap object that is returned when creating a package, or destroy it with a call to make_immutable. Here is an example on how to publish a Move project on chain using the one client ptb command. It makes a call to the sui::tx_context::sender to acquire the sender and assigns the result of that call to the sender variable, and then calls the publish command. The result of publish is bounded to upgrade_cap variable, and then this object is transferred to the sender.

$ one client ptb \
--move-call sui::tx_context::sender \
--assign sender \
--publish "." \
--assign upgrade_cap \
--transfer-objects "[upgrade_cap]" sender \
--gas-budget 100000000
Split, destroy, and merge coins
The following example showcases how to split a gas coin into multiple coins, make a move call to destroy one or more of the new coins, and finally merge the coins that were not destroyed back into the gas coin. It also showcases how to use framework name resolution (for example, sui::coin instead of 0x2::coin) and how to refer to different values in an array using the . syntax.

# Split off from gas
--split-coins gas "[0,1,2,3]"
--assign coins
--move-call sui::coin::destroy_zero<sui::oct::OCT> coins.0
# Can further split a split coin (and through variable bindings/result accesses)
--split-coins coins.1 "[0,0]"
--assign zcoins
# Destroy both new coins
--move-call sui::coin::destroy_zero<sui::oct::OCT> zcoins.0
--move-call sui::coin::destroy_zero<sui::oct::OCT> zcoins.1
# Can merge the split coins back
--merge-coins gas "[coins.1, coins.2, coins.3]"
--gas-budget 10000000
Transfer objects
This example creates three new coins from gas and transfers them to a different address.

--assign to_address @0x02a212de6a9dfa3a69e22387acfbafbb1a9e591bd9d636e7895dcfc8de05f331 \
--split-coins gas "[1,2,3]" \
--assign s \
--transfer-objects "[s.0, s.1, s.2]" to_address \
--gas-budget 10000000
INFO
You can also pass an alias (without the '@') instead of an address.

Reserved words
You cannot use the following words for variable names:

address
bool
vector
some
none
gas
u8
u16
u32
u64
u128
u256
JSON output
Append the --json flag to commands to format responses in JSON instead of the more human-friendly default OneChain CLI output. This can be useful for extremely large datasets, for example, as those results can have a troublesome display on smaller screens. In these cases, the --json flag is useful.

OneChain Console CLI
The OneChain CLI console command provides command-level access to interact with the OneChain network by wrapping the OneChain Client CLI command in a shell-like functionality. This command spins up a new process and provides the user an environment for running all the available OneChain Client CLI commands. In addition, it also offers command history support.

Check OneChain CLI installation
Before you can use the OneChain CLI, you must install it. To check if the CLI exists on your system, open a terminal or console and type the following command:

$ one --version
If the terminal or console responds with a version number, you already have the OneChain CLI installed.

If the command is not found, follow the instructions in Install OneChain to get the OneChain CLI on your system.

Commands
For all available commands, consult the OneChain Client CLI docs. To start the OneChain Console, type one console, which displays some information similar to the following:

🚀 ~ % one console
  ___                ____ _           _
 / _ \ _ __   ___   / ___| |__   __ _(_)_ __
| | | | '_ \ / _ \ | |   | '_ \ / _` | | '_ \
| |_| | | | |  __/ | |___| | | | (_| | | | | |
 \___/|_| |_|\___|  \____|_| |_|\__,_|_|_| |_|
--- OneChain Console 1.14.0 ---

Managed addresses : 2
Active address: 0x3...235
Keystore Type : File
Keystore Path : Some("/Users/user/.one/one_config/one.keystore")
Active environment : testnet
RPC URL: https://rpc-testnet.onelabs.cc:443
[warn] Client/Server api version mismatch, client api version : 1.14.0, server api version : 1.13.0
Connecting to OneChain full node. API version 1.13.0

Available RPC methods: ["sui_devInspectTransactionBlock", "sui_dryRunTransactionBlock", "sui_executeTransactionBlock",
"sui_getChainIdentifier", "sui_getCheckpoint", "sui_getCheckpoints", "sui_getEvents", "sui_getLatestCheckpointSequenceNumber",
"sui_getLoadedChildObjects", "sui_getMoveFunctionArgTypes", "sui_getNormalizedMoveFunction", "sui_getNormalizedMoveModule",
"sui_getNormalizedMoveModulesByPackage", "sui_getNormalizedMoveStruct", "sui_getObject", "sui_getProtocolConfig",
"sui_getTotalTransactionBlocks", "sui_getTransactionBlock", "sui_multiGetObjects", "sui_multiGetTransactionBlocks",
"sui_tryGetPastObject", "sui_tryMultiGetPastObjects", "suix_getAllBalances", "suix_getAllCoins", "suix_getBalance",
"suix_getCoinMetadata", "suix_getCoins", "suix_getCommitteeInfo", "suix_getDynamicFieldObject", "suix_getDynamicFields",
"suix_getLatestSuiSystemState", "suix_getOwnedObjects", "suix_getReferenceGasPrice", "suix_getStakes", "suix_getStakesByIds",
"suix_getTotalSupply", "suix_getValidatorsApy", "suix_queryEvents", "suix_queryTransactionBlocks", "suix_resolveNameServiceAddress",
"suix_resolveNameServiceNames", "suix_subscribeEvent", "suix_subscribeTransaction", "unsafe_batchTransaction", "unsafe_mergeCoins",
"unsafe_moveCall", "unsafe_pay", "unsafe_payAllOct", "unsafe_payOct", "unsafe_publish", "unsafe_requestAddStake",
"unsafe_requestWithdrawStake", "unsafe_splitCoin", "unsafe_splitCoinEqual", "unsafe_transferObject", "unsafe_transferOct"]

Welcome to the OneChain interactive console.

one>-$

OneChain Keytool CLI
The OneChain CLI keytool command provides several command-level access for the management and generation of addresses, as well as working with private keys, signatures, or zkLogin. For example, a user could export a private key from the OneChain Wallet and import it into the local OneChain CLI wallet using the one keytool import [...] command.

Check OneChain CLI installation
Before you can use the OneChain CLI, you must install it. To check if the CLI exists on your system, open a terminal or console and type the following command:

$ one --version
If the terminal or console responds with a version number, you already have the OneChain CLI installed.

If the command is not found, follow the instructions in Install OneChain to get the OneChain CLI on your system.

Commands
Usage: one keytool [OPTIONS] <COMMAND>

Commands:
  convert                           	Convert private key from legacy formats (e.g. Hex or Base64) to Bech32 encoded 33 byte `flag || private key` begins with `suiprivkey`
  decode-or-verify-tx                   Given a Base64 encoded transaction bytes, decode its components. If a signature is provided, verify the signature against the transaction
  											and output the result.
  decode-multi-sig                  	Given a Base64 encoded MultiSig signature, decode its components. If tx_bytes is passed in, verify the multisig
  generate                          	Generate a new keypair with key scheme flag {ed25519 | secp256k1 | secp256r1} with optional derivation path, default to
                                        	m/44'/784'/0'/0'/0' for ed25519 or m/54'/784'/0'/0/0 for secp256k1 or m/74'/784'/0'/0/0 for secp256r1. Word length can be { word12 |
                                        	word15 | word18 | word21 | word24} default to word12 if not specified
  import                            	Add a new key to one.keystore using either the input mnemonic phrase or a private key (from the Wallet), the key scheme flag {ed25519 |
                                        	secp256k1 | secp256r1} and an optional derivation path, default to m/44'/784'/0'/0'/0' for ed25519 or m/54'/784'/0'/0/0 for secp256k1
                                        	or m/74'/784'/0'/0/0 for secp256r1. Supports mnemonic phrase of word length 12, 15, 18`, 21, 24
  list                              	List all keys by its OneChain address, Base64 encoded public key, key scheme name in one.keystore
  load-keypair                      	This reads the content at the provided file path. The accepted format can be [enum SuiKeyPair] (Base64 encoded of 33-byte `flag ||
                                        	privkey`) or `type AuthorityKeyPair` (Base64 encoded `privkey`). This prints out the account keypair as Base64 encoded `flag ||
                                        	privkey`, the network keypair, worker keypair, protocol keypair as Base64 encoded `privkey`
  multi-sig-address                 	To MultiSig OneChain Address. Pass in a list of all public keys `flag || pk` in Base64. See `keytool list` for example public keys
  multi-sig-combine-partial-sig     	Provides a list of participating signatures (`flag || sig || pk` encoded in Base64), threshold, a list of all public keys and a list of
                                        	their weights that define the MultiSig address. Returns a valid MultiSig signature and its sender address. The result can be used as
                                        	signature field for `one client execute-signed-tx`. The sum of weights of all signatures must be >= the threshold
  multi-sig-combine-partial-sig-legacy
  show                              	Read the content at the provided file path. The accepted format can be [enum SuiKeyPair] (Base64 encoded of 33-byte `flag || privkey`)
                                        	or `type AuthorityKeyPair` (Base64 encoded `privkey`). It prints its Base64 encoded public key and the key scheme flag
  sign                              	Create signature using the private key for the given address in OneChain keystore. Any signature commits to a [struct IntentMessage]
                                        	consisting of the Base64 encoded of the BCS serialized transaction bytes itself and its intent. If intent is absent, default will be
                                        	used
  sign-kms                          	Creates a signature by leveraging AWS KMS. Pass in a key-id to leverage Amazon KMS to sign a message and the base64 pubkey. Generate
                                        	PubKey from pem using MystenLabs/base64pemkey Any signature commits to a [struct IntentMessage] consisting of the Base64 encoded of the
                                        	BCS serialized transaction bytes itself and its intent. If intent is absent, default will be used
  unpack                            	This takes [enum SuiKeyPair] of Base64 encoded of 33-byte `flag || privkey`). It outputs the keypair into a file at the current
                                        	directory where the address is the filename, and prints out its OneChain address, Base64 encoded public key, the key scheme, and the key
                                        	scheme flag
  zk-login-sign-and-execute-tx      	Given the max_epoch, generate an OAuth url, ask user to paste the redirect with id_token, call salt server, then call the prover
                                        	server, create a test transaction, use the ephemeral key to sign and execute it by assembling to a serialized zkLogin signature
  zk-login-enter-token              	A workaround to the above command because sometimes token pasting does not work. All the inputs required here are printed from the
                                        	command above
  zk-login-sig-verify               	Given a zkLogin signature, parse it if valid. If tx_bytes provided, it verifies the zkLogin signature based on provider and its latest
                                        	JWK fetched. Example request: one keytool zk-login-sig-verify --sig $SERIALIZED_ZKLOGIN_SIG --tx-bytes $TX_BYTES --provider Google
                                        	--curr-epoch 10
  help                              	Print this message or the help of the given subcommand(s)

Options:
  	--keystore-path <KEYSTORE_PATH>
  	--json                       	Return command outputs in json format
  -h, --help                       	Print help
JSON output
Append the --json flag to commands to format responses in JSON instead of the more human friendly default OneChain CLI output. This can be useful for extremely large datasets, for example, as those results can have a troublesome display on smaller screens. In these cases, the --json flag is useful.

Examples
The following examples demonstrate some of the most often used commands.

List the key pairs in the local wallet
Use the one keytool list command to output all the OneChain addresses that exist in the ~/.one/one_config/one.keystore file in a readable format.

$ one keytool list
╭────────────────────────────────────────────────────────────────────────────────────────────╮
│ ╭─────────────────┬──────────────────────────────────────────────────────────────────────╮ │
│ │ suiAddress      │  0x3047f142a84297a42a65fb0a8c7a716d9d1b0bd0413d6bfa5ddfec45df175235  │ │
│ │ publicBase64Key │  AHsXwcxaWNaNtCIIszwu7V2G6HO8aNM1598w/8y0zI5q                        │ │
│ │ keyScheme       │  ed25519                                                             │ │
│ │ flag            │  0                                                                   │ │
│ │ peerId          │  7b17c1cc5a58d68db42208b33c2eed5d86e873bc68d335e7df30ffccb4cc8e6a    │ │
│ ╰─────────────────┴──────────────────────────────────────────────────────────────────────╯ │
│ ╭─────────────────┬──────────────────────────────────────────────────────────────────────╮ │
│ │ suiAddress      │  0x514692f08249c3e9957799ce29074695840422564bff85e424b56de462913e0d  │ │
│ │ publicBase64Key │  AKJCGi8R8TslhYdO2OHIjI6rbr+to1eR+vlOjigLY6SX                        │ │
│ │ keyScheme       │  ed25519                                                             │ │
│ │ flag            │  0                                                                   │ │
│ │ peerId          │  a2421a2f11f13b2585874ed8e1c88c8eab6ebfada35791faf94e8e280b63a497    │ │
│ ╰─────────────────┴──────────────────────────────────────────────────────────────────────╯ │
╰────────────────────────────────────────────────────────────────────────────────────────────╯
Generate a new key pair and store it in a file
To generate a new key pair with the ed25519 scheme, use the one keytool generate ed25519 command. For other schemes, see one keytool generate –help. The key pair file is saved to the current directory with its filename being the address. The content of the file is a Base64 encoded string of 33-byte flag || privkey.

$ one keytool generate ed25519
╭─────────────────┬───────────────────────────────────────────────────────────────────────────────────╮
│ suiAddress      │  0x5d8aa70f17d9343813d3ba6a59ecf5e8a23ffb487938e860999a722989eaef25               │
│ publicBase64Key │  AKTAGf9iv0JqeLXXlsr4PUzBXb9VY8lK7xiZMS50GSu6                                     │
│ keyScheme       │  ed25519                                                                          │
│ flag            │  0                                                                                │
│ mnemonic        │  cushion price ability recall payment embody kid media rude mosquito chalk broom  │
│ peerId          │  a4c019ff62bf426a78b5d796caf83d4cc15dbf5563c94aef1899312e74192bba                 │
╰─────────────────┴───────────────────────────────────────────────────────────────────────────────────╯
Show the key pair data from a file
Use one keytool show [filename] to show the key pair data that is stored in a file. For example, the previous command generated a file named 0x5d8aa70f17d9343813d3ba6a59ecf5e8a23ffb487938e860999a722989eaef25.key.

$ one keytool show 0x5d8aa70f17d9343813d3ba6a59ecf5e8a23ffb487938e860999a722989eaef25.key
╭─────────────────┬──────────────────────────────────────────────────────────────────────╮
│ suiAddress      │  0x5d8aa70f17d9343813d3ba6a59ecf5e8a23ffb487938e860999a722989eaef25  │
│ publicBase64Key │  AC+AKTAGf9iv0JqeLXXlsr4PUzBXb9VY8lK7xiZMS50GSu6                     │
│ keyScheme       │  ed25519                                                             │
│ flag            │  0                                                                   │
│ peerId          │  a4c019ff62bf426a78b5d796caf83d4cc15dbf5563c94aef1899312e74192bba    │
╰─────────────────┴──────────────────────────────────────────────────────────────────────╯
Sign a transaction
$ one keytool sign --data AAABACBRRpLwgknD6ZV3mc4pB0aVhAQiVkv/heQktW3kYpE+DQEBAQABAAAwR/FCqEKXpCpl+wqMenFtnRsL0EE9a/pd3+xF3xdSNQEaEUeErlBmGWxz3Bh+9BZh2mzayodzsri7xIZNDHRA3wIAAAAAAAAAILsR2d1FIZ5+ADDYZtJ2e9CWlpAxsGd4Y2rZrjlyTUF1MEfxQqhCl6QqZfsKjHpxbZ0bC9BBPWv6Xd/sRd8XUjXoAwAAAAAAAICWmAAAAAAAAA== --address 0x3047f142a84297a42a65fb0a8c7a716d9d1b0bd0413d6bfa5ddfec45df175235
╭──────────────┬──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ suiAddress   │ 0x3047f142a84297a42a65fb0a8c7a716d9d1b0bd0413d6bfa5ddfec45df175235                                                                                               │
│ rawTxData    │ AAABACBRRpLwgknD6ZV3mc4pB0aVhAQiVkv/heQktW3kYpE+DQEBAQABAAAwR/FCqEKXpCpl+wqMenFtnRsL0EE9a/pd3+xF3xdSNQEaEUeErlBmGWxz3Bh+9BZh2mzayodzsri7xIZNDHRA3wIAAAAAAAAAILsR │
│              │ 2d1FIZ5+ADDYZtJ2e9CWlpAxsGd4Y2rZrjlyTUF1MEfxQqhCl6QqZfsKjHpxbZ0bC9BBPWv6Xd/sRd8XUjXoAwAAAAAAAICWmAAAAAAAAA==                                                     │
│ intent       │ ╭─────────┬─────╮                                                                                                                                                │
│              │ │ scope   │  0  │                                                                                                                                                │
│              │ │ version │  0  │                                                                                                                                                │
│              │ │ app_id  │  0  │                                                                                                                                                │
│              │ ╰─────────┴─────╯                                                                                                                                                │
│ rawIntentMsg │ AAAAAAABACBRRpLwgknD6ZV3mc4pB0aVhAQiVkv/heQktW3kYpE+DQEBAQABAAAwR/FCqEKXpCpl+wqMenFtnRsL0EE9a/pd3+xF3xdSNQEaEUeErlBmGWxz3Bh+9BZh2mzayodzsri7xIZNDHRA3wIAAAAAAAAA │
│              │ ILsR2d1FIZ5+ADDYZtJ2e9CWlpAxsGd4Y2rZrjlyTUF1MEfxQqhCl6QqZfsKjHpxbZ0bC9BBPWv6Xd/sRd8XUjXoAwAAAAAAAICWmAAAAAAAAA==                                                 │
│ digest       │ +B8Cbr16HfOVT50DoN/QF8HB0+oznm8KAYy8Rm+TQFo=                                                                                                                     │
│ suiSignature │ ANucBEl9TIE0uv+w965DvOjlfDUll7NUtIpJgRhPc3D3y3EtZ4cvaNbm8i5pc7TNIov/qI0FhzIYf2J6PbqoNQ57F8HMWljWjbQiCLM8Lu1dhuhzvGjTNeffMP/MtMyOag==                             │
╰──────────────┴──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
Help
Each command has its own help section. For example one keytool sign –help displays the following prompt:

$ one keytool sign --help
Create signature using the private key for the given address in OneChain keystore. Any signature commits to a [struct IntentMessage] consisting of the Base64 encoded of the BCS serialized
transaction bytes itself and its intent. If intent is absent, default will be used

Usage: one keytool sign [OPTIONS] --address <ADDRESS> --data <DATA>

Options:
  	--address <ADDRESS>
  	--data <DATA>
  	--json           	Return command outputs in json format
  	--intent <INTENT>
  -h, --help           	Print help
OneChain Move CLI
The OneChain CLI move command provides several commands for working with Move source code. A typical usage of one move is to compile and test the Move code, or to generate a new Move project by using one move new project_name, which creates the needed directories and the Move.toml file.

Check OneChain CLI installation
Before you can use the OneChain CLI, you must install it. To check if the CLI exists on your system, open a terminal or console and type the following command:

$ one --version
If the terminal or console responds with a version number, you already have the OneChain CLI installed.

If the command is not found, follow the instructions in Install OneChain to get the OneChain CLI on your system.

Commands
Typing one move --help into your terminal or console displays the following information on available commands.

Usage: one move [OPTIONS] <COMMAND>

Commands:
  build
  coverage 	  Inspect test coverage for this package. A previous test run with the `--coverage` flag must have previously been run
  disassemble
  manage-package  Record addresses (Object IDs) for where this package is published on chain (this command sets variables in Move.lock)
  migrate         Migrate to Move 2024 for the package at `path`. If no path is provided defaults to current directory
  new             Create a new Move package with name `name` at `path`. If `path` is not provided the package will be created in the directory `name`
  test     	  Run Move unit tests in this package
  help            Print this message or the help of the given subcommand(s)

Options:
  -p, --path <PACKAGE_PATH>                 	Path to a package which the command should be run with respect to
  -d, --dev                                 	Compile in 'dev' mode. The 'dev-addresses' and 'dev-dependencies' fields will be used if this flag is set. This flag is useful for
                                            	development of packages that expose named addresses that are not set to a specific value
  	--test                                	Compile in 'test' mode. The 'dev-addresses' and 'dev-dependencies' fields will be used along with any code in the 'tests' directory
  	--doc                                 	Generate documentation for packages
  	--abi                                 	Generate ABIs for packages
  	--install-dir <INSTALL_DIR>           	Installation directory for compiled artifacts. Defaults to current directory
  	--force                               	Force recompilation of all packages
  	--fetch-deps-only                     	Only fetch dependency repos to MOVE_HOME
  	--skip-fetch-latest-git-deps          	Skip fetching latest git dependencies
  	--default-move-flavor <DEFAULT_FLAVOR>	Default flavor for move compilation, if not specified in the package's config
  	--default-move-edition <DEFAULT_EDITION>  Default edition for move compilation, if not specified in the package's config
  	--dependencies-are-root               	If set, dependency packages are treated as root packages. Notably, this will remove warning suppression in dependency packages
  -h, --help                                	Print help
  -V, --version                             	Print version
Examples
The following examples demonstrate some of the most often used commands.

Create a new Move project
To create a new Move project that automatically adds the necessary dependencies in a Move.toml file, run one move new [<PROJECT-NAME>].

$ one move new smart_contract_test
$ ls -l smart_contract_test
Move.toml
Sources
Display the contents of Move.toml file.

$ cat smart_contract_test/Move.toml
[package]
name = "smart_contract_test"
version = "0.0.1"

[dependencies]
One = { git = "https://github.com/one-chain-labs/onechain.git", subdir = "crates/sui-framework/packages/sui-framework", rev = "framework/testnet" }

[addresses]
smart_contract_test = "0x0"
Build a Move project
Use one move build at the root of your Move project to build the package.

$ one move build
UPDATING GIT DEPENDENCY https://github.com/one-chain-labs/onechain.git
INCLUDING DEPENDENCY One
INCLUDING DEPENDENCY MoveStdlib
BUILDING smart_contract_test
Run tests in a Move project
Use one move test to run the tests in a Move package.

$ one move test
UPDATING GIT DEPENDENCY https://github.com/one-chain-labs/onechain.git
INCLUDING DEPENDENCY One
INCLUDING DEPENDENCY MoveStdlib
BUILDING smart_contract_test
Running Move unit tests
Test result: OK. Total tests: 0; passed: 0; failed: 0
Get test coverage for a module
CAUTION
This command currently only works on debug builds of the CLI. Please build the CLI from source to use it.

This example uses first_package Move package.

To get a summary of the test coverage, you must first run the one move test --coverage command, and then the one move coverage summary --test to get a summary of the test coverage in the example project.

$ one move test --coverage
INCLUDING DEPENDENCY One
INCLUDING DEPENDENCY MoveStdlib
BUILDING first_package
Running Move unit tests
[ PASS    ] 0x0::example::test_module_init
[ PASS    ] 0x0::example::test_sword_transactions
Test result: OK. Total tests: 2; passed: 2; failed: 0

$ one move coverage summary --test
+-------------------------+
| Move Coverage Summary   |
+-------------------------+
Module 0000000000000000000000000000000000000000000000000000000000000000::example
>>> % Module coverage: 92.81
+-------------------------+
| % Move Coverage: 92.81  |
+-------------------------+
Help
Each command has its own help section. For example one move build --help displays the following prompt:

$ one move build --help
Usage: one move build [OPTIONS]

Options:
  -p, --path <PACKAGE_PATH>                     Path to a package which the command should be run with respect to
      --with-unpublished-dependencies           Include the contents of packages in dependencies that haven't been published (only relevant when dumping
                                                bytecode as base64)
      --dump-bytecode-as-base64                 Whether we are printing in base64
  -d, --dev                                     Compile in 'dev' mode. The 'dev-addresses' and 'dev-dependencies' fields will be used if this flag is set. This
                                                flag is useful for development of packages that expose named addresses that are not set to a specific value
      --ignore-chain                            Don't specialize the package to the active chain when dumping bytecode as Base64. This allows building to
                                                proceed without a network connection or active environment, but it will not be able to automatically determine
                                                the addresses of its dependencies
      --generate-struct-layouts                 If true, generate struct layout schemas for all struct types passed into `entry` functions declared by modules
                                                in this package These layout schemas can be consumed by clients (e.g., the TypeScript SDK) to enable
                                                serialization/deserialization of transaction arguments and events
      --test                                    Compile in 'test' mode. The 'dev-addresses' and 'dev-dependencies' fields will be used along with any code in
                                                the 'tests' directory
      --doc                                     Generate documentation for packages
      --install-dir <INSTALL_DIR>               Installation directory for compiled artifacts. Defaults to current directory
      --force                                   Force recompilation of all packages
      --fetch-deps-only                         Only fetch dependency repos to MOVE_HOME
      --skip-fetch-latest-git-deps              Skip fetching latest git dependencies
      --default-move-flavor <DEFAULT_FLAVOR>    Default flavor for move compilation, if not specified in the package's config
      --default-move-edition <DEFAULT_EDITION>  Default edition for move compilation, if not specified in the package's config
      --dependencies-are-root                   If set, dependency packages are treated as root packages. Notably, this will remove warning suppression in
                                                dependency packages
      --silence-warnings                        If set, ignore any compiler warnings
      --warnings-are-errors                     If set, warnings become errors
      --json-errors                             If set, reports errors at JSON
      --no-lint                                 If `true`, disable linters
      --lint                                    If `true`, enables extra linters
  -h, --help                                    Print help
  -V, --version                                 Print version
OneChain Validator CLI
The OneChain CLI validator command provides command-level access to validator features of the OneChain network.

Commands
Typing one validator --help into your terminal or console displays the following information on available commands.

Usage: one validator [OPTIONS] [COMMAND]

Commands:
  make-validator-info
  become-candidate
  join-committee
  leave-committee
  display-metadata
  update-metadata
  update-gas-price              	Update gas price that is used to calculate Reference Gas Price
  report-validator              	Report or un-report a validator
  serialize-payload-pop         	Serialize the payload that is used to generate Proof of Possession. This is useful to take the payload offline for an Authority protocol
                                    	keypair to sign
  display-gas-price-update-raw-txn  Print out the serialized data of a transaction that sets the gas price quote for a validator
  help                          	Print this message or the help of the given subcommand(s)

Options:
  	--client.config <CONFIG>  Sets the file storing the state of our user accounts (an empty one will be created if missing)
  	--json                	Return command outputs in json format
  -y, --yes
  -h, --help                	Print help
Examples
The following examples demonstrate some of the most often used commands.

Update gas price for next epoch
$ one validator  update-gas-price 500
Toggle output

Set gas price for the next epoch
TIP
Beginning with the OneChain release, the --gas-budget option is no longer required for CLI commands.

$ one validator request_set_gas_price --args 0x5 \"42\" --gas-budget GAS-BUDGET-AMOUNT>
Display the validator information
$ one validator display-metadata 0x3...de5
Toggle output

Report a bad / non-performant validator
$ one validator report-validator  0xf...3d9
Toggle output

Help
Each command has its own help section. For example one validator report-validator --help will display the following prompt:

$ one validator report-validator --help
Report or un-report a validator

Usage: one validator report-validator [OPTIONS] <reportee-address>

Arguments:
  <reportee-address>  The OneChain Address of the validator is being reported or un-reported

Options:
  	--operation-cap-id <operation-cap-id>  Optional when sender is reporter validator itself and it holds the Cap object. Required when sender is not the reporter validator itself.
                                         	Validator's OperationCap ID can be found by using the `display-metadata` subcommand
  	--undo-report <undo-report>        	If true, undo an existing report [possible values: true, false]
  	--gas-budget <gas-budget>          	Gas budget for this transaction
  	--json                             	Return command outputs in json format
  -h, --help                             	Print help
OneChain CLI Cheat Sheet
The cheat sheet highlights common OneChain CLI commands.

Addresses & Aliases
Command	Description
one client active-address	Get the active address
one client addresses	List the addresses, their aliases, and the active address
one client new-address ed25519	Create a new address with ED25519 scheme
one client new-address ed25519 MY_ALIAS	Create a new address with ED25519 scheme and alias
one client switch --address ADDRESS	Make this the active address (accepts also an alias)
one keytool convert PRIVATE_KEY	Convert private key in Hex or Base64 to new format (Bech32 encoded 33 byte flag || private key starting with "suiprivkey")
one keytool generate ed25519	Generate a new keypair with ED25519 scheme and save it to file
one keytool import INPUT KEY_SCHEME	Add a new key to OneChain CLI Keystore using either the input mnemonic phrase or a Bech32 encoded 33-byte flag || privkey starting with "suiprivkey"
one keytool update-alias OLD_ALIAS NEW_ALIAS	Update the alias of an address
Faucet & Gas
Command	Description
one client faucet	Get a Gas coin(OCT) from the faucet associated with the active network
one client faucet --address ADDRESS	Get a Gas coin(OCT) for the address (accepts also an alias)
one client faucet --url CUSTOM_FAUCET_URL	Get a Gas coin(OCT) from custom faucet
one client gas	List the gas coins for the active address
one client gas ADDRESS	List the gas coins for the given address (accepts also an alias)
Network Command Description
Command	Description
one client active-env	Get the active environment
one client envs	List defined environments
one client new-env --rpc URL --alias ALIAS	Create a new environment with URL and alias
one client switch --env ENV_ALIAS	Switch to the given environment
one genesis	Bootstrap and initialize a new OneChain network
one start	Start the local OneChain network
one-faucet	Start a local faucet. Note this is a different binary
Create, Build, and Test a Move Project
Command	Description
one move build	Build the Move project in the current directory
one move build --path PATH	Build the Move project from the given path
one move migrate PATH	Migrate to Move 2024 for the package at provided path
one move new PROJECT_NAME	Create a new Move project in the given folder
one move test	Test the Move project in the current directory
one move test --trace-execution	Create an execution trace for the Move tests in the current directory. Use with the Move Trace Debugger extension.
Executing Transactions
Command	Description
one client call \
  --package PACKAGE \
  --module MODULE \
  --function FUNCTION	Call a Move package
one client merge-coin \
  --primary-coin COIN_ID \
  --coin-to-merge COIN_ID	Merge two coins
one client split-coin \
  --coin-id COIN_ID \
  --amounts 1000	Split a coin into two coins: one with 1000 MIST and the rest
one client pay-oct \
  --input-coins COIN_ID \
  --recipients ADDRESS \
  --amounts 100000000

Transfer 0.1 OCT to an address and use the same coin for gas
one client transfer-oct \
  --coin-object-id COIN_ID \
  --to ADDRESS	Transfer OCT object to an address and use the same coin for gas
Programmable Transaction Blocks (PTBs)
Command	Description
one client ptb --move-call p::m::f "<type>" args	Call a Move function from a package and module
one client ptb --make-move-vec "<u64>" "[1000,2000]"	Make a Move vector with two elements of type u64
one client ptb \
  --split-coins gas "[1000]" \
  --assign new_coins \
  --transfer-objects "[new_coins]" ADDRESS

Split a gas coin and transfer it to address
one client ptb --transfer-objects "[object_id]" ADDRESS	
Transfer an object to an address. Note that you can pass multiple objects in the array

one client ptb \
  --move-call sui::tx_context::sender \
  --assign sender \
  --publish "." \
  --assign upgrade_cap \
  --transfer-objects "[upgrade_cap]" sender

Publish a Move package, and transfer the upgrade capability to sender
OneChain SDKs